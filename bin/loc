#!/usr/bin/python3
import requests
from lxml import html, etree
response = requests.get("https://sydney.locanto.com.au/Personals/P/?sort=date")
tree = html.fromstring(response.text)
entries = tree.xpath('//div[contains(@class, "bp_ad ") and not(contains(@class, "--native_ad"))]')
for entry in entries:
    good = '✓'
    m4mIcon = entry.xpath('.//use[@*[local-name()="xlink:href"]="/assets/221216_101944/images/bg/icons/sprites/desktop/personals/sprite.svg#204"]')
    w4mOrm4wIcon = entry.xpath('.//use[@*[local-name()="xlink:href"]="/assets/221216_101944/images/bg/icons/sprites/desktop/personals/sprite.svg#201_202"]')
    if len(m4mIcon) > 0:
        good = '✘'
    ad_url = entry.xpath('.//a[@class="bp_ad__link"]/@href')
    print(good, ad_url)
    #title = entry.xpath('.//h3[@class="bp_ad__title"]')[0]
    #desc = entry.xpath('.//a[@class="bp_ad__desc_link"]')[0]
    #print(etree.tostring(entry))
    #print(category)
    #print()
    #print(title.text)
    #print()
    #print(desc.text)
    #print()
